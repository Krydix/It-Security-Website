<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-sprint-documentation/sprint-2" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Sprint 2 - System Hardening and LAMP Stack | IT Security Study Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://krydix.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://krydix.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://krydix.github.io/docs/sprint-documentation/sprint-2"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Sprint 2 - System Hardening and LAMP Stack | IT Security Study Guide"><meta data-rh="true" name="description" content="VM identification, system hardening, service optimization, and LAMP stack configuration"><meta data-rh="true" property="og:description" content="VM identification, system hardening, service optimization, and LAMP stack configuration"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://krydix.github.io/docs/sprint-documentation/sprint-2"><link data-rh="true" rel="alternate" href="https://krydix.github.io/docs/sprint-documentation/sprint-2" hreflang="en"><link data-rh="true" rel="alternate" href="https://krydix.github.io/docs/sprint-documentation/sprint-2" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Sprint 2 - System Hardening and LAMP Stack","item":"https://krydix.github.io/docs/sprint-documentation/sprint-2"}]}</script><link rel="stylesheet" href="/assets/css/styles.2968da56.css">
<script src="/assets/js/runtime~main.133a4481.js" defer="defer"></script>
<script src="/assets/js/main.880ed671.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="IT Security Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="IT Security Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IT Security Study Guide</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Study Guide</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Krydix/It-Security-Website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">IT Security Test Preparation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/complete-test-guide">Complete Test Preparation Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/network-fundamentals">Network Fundamentals &amp; Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/operating-system-security">Operating System Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/web-security-lamp">Web Security &amp; LAMP Stack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cryptography-security">Cryptography &amp; Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/windows-security-analysis">Microsoft Windows Security Analysis</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/sprint-documentation/sprint-1">Sprint Documentation</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sprint-documentation/sprint-1">Sprint 1 - VM Setup and Initial Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/sprint-documentation/sprint-2">Sprint 2 - System Hardening and LAMP Stack</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/production-deployment">Production Deployment - Nginx &amp; Let&#x27;s Encrypt</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Sprint Documentation</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Sprint 2 - System Hardening and LAMP Stack</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Sprint 2 - System Hardening and LAMP Stack</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-identify-our-vm">1. Identify our VM<a href="#1-identify-our-vm" class="hash-link" aria-label="Direct link to 1. Identify our VM" title="Direct link to 1. Identify our VM">​</a></h2>
<p>we can identify our VM by searching for our SSH Public Key which we had stored earlier.
We stored the raw content of the .pub file before. What we have in the <code>ssh-keys-final.txt</code>file is the fingerprint and not the raw public key. We need to hash it before we can compare them.</p>
<p>To do that, we can relay our key with echo and then pipe it trough the ssh-keygen like this</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;&lt;key_content&gt;&quot; | ssh-keygen -lf -</span><br></span></code></pre></div></div>
<p>where the flags <code>-l</code>means list fingerprint and <code>-f</code>sets the file to read. As &quot;File to read&quot; we set <code>-</code>which is actually not a file but the stdin. This of course is the key_content we relayed with echo before.</p>
<p><img decoding="async" loading="lazy" alt="SSH Key Fingerprint" src="/assets/images/Pasted image 20250620084028-1d4f9ca57b98afb34df6be29f3306ff7.png" width="1364" height="966" class="img_ev3q"></p>
<p>This fingerprint we can find in our list and our VM is <code>studi36-labor42.f2.htw-berlin.de</code> so we can logg it to it with</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh root@studi36-labor42.f2.htw-berlin.de</span><br></span></code></pre></div></div>
<p>Since I connected from my linux system to the VM before we have to enable the SSH authentication with the SSH key. I did not turn off login with password, therefore we can just log in and do the command again</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id root@studi36-labor42.f2.htw-berlin.de</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="SSH Key Copy" src="/assets/images/Pasted image 20250620095735-463aa2f4af113fb33f16cf7ebf5e7ea5.png" width="1938" height="910" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-set-the-correct-fqdn">2. Set the correct FQDN<a href="#2-set-the-correct-fqdn" class="hash-link" aria-label="Direct link to 2. Set the correct FQDN" title="Direct link to 2. Set the correct FQDN">​</a></h2>
<p>We are studi36 so our hostname should be  <code>studi36-labor42.f2.htw-berlin.de</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-the-hostname">Understanding the hostname<a href="#understanding-the-hostname" class="hash-link" aria-label="Direct link to Understanding the hostname" title="Direct link to Understanding the hostname">​</a></h3>
<p>The hostname is defined in <code>/etc/hostname</code>
currently our hostname is already working correctly as expected, but the assignment says we should set it manually.
The transient hostname was likely set by the DHCP server</p>
<p><img decoding="async" loading="lazy" alt="Hostname Status" src="/assets/images/Pasted image 20250620100936-348531534f4cae7110a4abf340c99c67.png" width="1826" height="826" class="img_ev3q"></p>
<p>there is a Static one with .detest, lets just not have the .detest here it is not correct</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hostnamectl set-hostname studi36-labor42.f2.htw-berlin.de</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Hostname Set" src="/assets/images/Pasted image 20250620101142-7293d6de5fa1baaee03bdc6a0ddc6c6c.png" width="1826" height="826" class="img_ev3q"></p>
<p>The static hostname is now correct.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-reduce-autostart-programs">3. Reduce Autostart programs<a href="#3-reduce-autostart-programs" class="hash-link" aria-label="Direct link to 3. Reduce Autostart programs" title="Direct link to 3. Reduce Autostart programs">​</a></h2>
<p>We can list the programs that are running at the moment with</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ps auxfw</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Running Processes" src="/assets/images/Pasted image 20250620101638-66c87c6382b065eed00e9fbf57d9ab82.png" width="1826" height="1638" class="img_ev3q"></p>
<p>We can list all system deamons with <code>systemctl</code></p>
<p><img decoding="async" loading="lazy" alt="System Services" src="/assets/images/Pasted image 20250620101959-33df62de6e3f8cbb838cc953cbe83e2a.png" width="2722" height="1638" class="img_ev3q"></p>
<p>Quit it with <code>q</code></p>
<p>better yet we can show the enabled ones only with</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl list-unit-files --type=service --state=enabled</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Enabled Services" src="/assets/images/Pasted image 20250705202517-e50ab7af7b7a7b0099ba6192d3407065.png" width="2526" height="1414" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-services-can-we-deactivate">What services can we deactivate?<a href="#what-services-can-we-deactivate" class="hash-link" aria-label="Direct link to What services can we deactivate?" title="Direct link to What services can we deactivate?">​</a></h3>
<p>I asked the Chat GPT to explain all the services to me so I have a better understanding of the System.</p>
<table><thead><tr><th><strong>Service</strong></th><th><strong>Description</strong></th><th><strong>Recommendation</strong></th><th><strong>Reason</strong></th></tr></thead><tbody><tr><td>atd.service</td><td>Schedules one-time delayed jobs (via at)</td><td>Optional</td><td>Only needed if you use the at command</td></tr><tr><td>auditd.service</td><td>Security audit daemon</td><td><strong>Keep</strong></td><td>Required for system auditing/compliance</td></tr><tr><td>bluetooth.service</td><td>Manages Bluetooth devices</td><td><strong>Disable</strong></td><td>Not needed on servers without Bluetooth</td></tr><tr><td>chronyd.service</td><td>Network time synchronization</td><td>Optional</td><td>Disable only if another NTP mechanism is used</td></tr><tr><td>crond.service</td><td>Schedules recurring tasks (cron)</td><td><strong>Keep</strong></td><td>Needed for routine jobs like backups, log rotation</td></tr><tr><td>dbus-broker.service</td><td>Core IPC system for D-Bus</td><td><strong>Keep</strong></td><td>Required by many system services</td></tr><tr><td>firewalld.service</td><td>Dynamic firewall daemon</td><td>Optional</td><td>Disable only if using external firewall or nftables/iptables directly</td></tr><tr><td><a href="mailto:getty@.service" target="_blank" rel="noopener noreferrer">getty@.service</a></td><td>Manages console logins (TTYs)</td><td><strong>Keep</strong></td><td>Required for login access on physical terminals</td></tr><tr><td>irqbalance.service</td><td>Distributes hardware interrupts across CPUs</td><td>Optional</td><td>Helps performance on multi-core machines</td></tr><tr><td>iscsi-onboot.service</td><td>Starts iSCSI targets at boot</td><td>Optional</td><td>Needed only if using iSCSI disks</td></tr><tr><td>iscsi-starter.service</td><td>iSCSI initiator</td><td>Optional</td><td>Same as above</td></tr><tr><td>kdump.service</td><td>Kernel crash dump tool</td><td>Optional</td><td>Disable if you don&#x27;t need crash diagnostics</td></tr><tr><td>libstoragemgmt.service</td><td>Manages SAN/storage arrays</td><td>Optional</td><td>Disable unless managing enterprise storage</td></tr><tr><td>low-memory-monitor.service</td><td>Monitors and reacts to low memory</td><td><strong>Disable</strong></td><td>GNOME/desktop related – not useful on servers</td></tr><tr><td>lvm2-monitor.service</td><td>Monitors LVM volumes</td><td><strong>Keep</strong></td><td>Required if you use LVM</td></tr><tr><td>mcelog.service</td><td>Logs hardware (CPU/RAM) errors</td><td>Optional</td><td>Good for diagnostics but not essential</td></tr><tr><td>mdmonitor.service</td><td>Monitors software RAID (mdadm)</td><td>Optional</td><td>Needed only if you use software RAID</td></tr><tr><td>microcode.service</td><td>Installs CPU microcode updates</td><td><strong>Keep</strong></td><td>Improves CPU security and stability</td></tr><tr><td>multipathd.service</td><td>Handles multipath I/O (SANs)</td><td>Optional</td><td>Needed only for SAN/multipath setups</td></tr><tr><td>NetworkManager-dispatcher.service</td><td>Runs scripts on network changes</td><td>Optional</td><td>Only needed if using NM hook scripts</td></tr><tr><td>NetworkManager-wait-online.service</td><td>Waits for network before boot continues</td><td>Optional</td><td>Disable unless needed for boot dependencies</td></tr><tr><td>NetworkManager.service</td><td>Main network manager</td><td><strong>Keep</strong></td><td>Core network service unless replaced by network.service</td></tr><tr><td>nis-domainname.service</td><td>Sets domain name for NIS</td><td><strong>Disable</strong></td><td>Legacy network system; unused in most setups</td></tr><tr><td>nvmefc-boot-connections.service</td><td>NVMe over Fibre Channel boot service</td><td>Optional</td><td>Needed only if booting from NVMe over FC</td></tr><tr><td>qemu-guest-agent.service</td><td>Communicates with host hypervisor</td><td><strong>Keep</strong></td><td>Useful inside VMs (QEMU/KVM)</td></tr><tr><td>rpcbind.service</td><td>RPC service needed for NFSv3</td><td>Optional</td><td>Only needed for legacy NFS or RPC services</td></tr><tr><td>rsyslog.service</td><td>Syslog daemon for logging</td><td><strong>Keep</strong></td><td>Manages logs; critical unless using journald-only setup</td></tr><tr><td>rtkit-daemon.service</td><td>Realtime permissions (used by PulseAudio)</td><td><strong>Disable</strong></td><td>Desktop/audio related, not needed on servers</td></tr><tr><td>selinux-autorelabel-mark.service</td><td>Handles SELinux relabeling</td><td><strong>Keep</strong></td><td>Needed for SELinux to function properly</td></tr><tr><td>smartd.service</td><td>Monitors hard disk health (SMART)</td><td>Optional</td><td>Good for monitoring, but can be disabled</td></tr><tr><td>sshd.service</td><td>OpenSSH daemon</td><td><strong>Keep</strong></td><td>Critical for remote access</td></tr><tr><td>sssd.service</td><td>Manages NSS/LDAP/Kerberos/AD auth</td><td><strong>Keep</strong></td><td>Required for domain or centralized user auth</td></tr><tr><td>systemd-boot-update.service</td><td>Updates systemd-boot on kernel changes</td><td><strong>Keep</strong></td><td>Only needed if using systemd-boot</td></tr><tr><td>systemd-network-generator.service</td><td>Generates network configs dynamically</td><td><strong>Keep</strong></td><td>Required in some setups with NM/systemd-netd</td></tr><tr><td>tuned.service</td><td>Dynamic performance tuning daemon</td><td>Optional</td><td>Disable if you don&#x27;t need system tuning profiles</td></tr><tr><td>udisks2.service</td><td>Disk hotplug &amp; desktop storage daemon</td><td><strong>Disable</strong></td><td>Desktop-only; not needed on headless servers</td></tr><tr><td>upower.service</td><td>Power management daemon</td><td><strong>Disable</strong></td><td>Also desktop-related; not relevant on servers</td></tr></tbody></table>
<p>There are to many services which would take to much time researching them, so I just clone my local VM instance and try disabling all the ones it recommended to disable, then the optionals and if I then still can log in I will deactivate them all in the server</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="command-to-disable-services">Command to disable services<a href="#command-to-disable-services" class="hash-link" aria-label="Direct link to Command to disable services" title="Direct link to Command to disable services">​</a></h4>
<p>These are for sure not needed</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable nis-domainname.service iscsi-onboot.service libstoragemgmt.service mcelog.service mdmonitor.service microcode.service</span><br></span></code></pre></div></div>
<p>Back on my Linux system where my local VM is, disabling the ones not needed for testing</p>
<p><img decoding="async" loading="lazy" alt="Service Disable Test" src="/assets/images/Pasted image 20250705205543-3778f7d98aa2d3663e99c2a88d2b7714.png" width="1052" height="679" class="img_ev3q"></p>
<p>Yes I can still log in after reboot.</p>
<p><img decoding="async" loading="lazy" alt="Login Test" src="/assets/images/Pasted image 20250705205659-0d0d68f3c1b60d88a7383388683f0442.png" width="1052" height="679" class="img_ev3q"></p>
<p>And these are the optional ones, since the first worked I can try these. Since I am on a copy of the local VM even I can try here as much as I want.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable bluetooth.service irqbalance.service upower.service smartd.service low-memory-monitor.service</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Optional Services Disable" src="/assets/images/Pasted image 20250705205949-cbecd69e7f3d68d1c4ed3646f16bb1ca.png" width="1052" height="679" class="img_ev3q"></p>
<p>these are also fine to disable I could still log in</p>
<p>The following ones need testing before disabling, so I check the conditions of those one by one on my local VM</p>
<table><thead><tr><th><strong>Service</strong></th><th><strong>Disable Command</strong></th><th><strong>Purpose</strong></th><th><strong>How to Test If Needed</strong></th><th>My Test Result</th><th>Disable?</th></tr></thead><tbody><tr><td>tuned.service</td><td>systemctl disable tuned.service</td><td>Power/cpu tuning profiles (performance/powersave)</td><td>Run tuned-adm active. If not actively tuning, safe to disable.</td><td>tuned-adm active. Current active profile: virtual-guest. Profile for running in a VM, which we are so we keep it</td><td>No</td></tr><tr><td>firewalld.service</td><td>systemctl disable firewalld.service</td><td>Firewall management</td><td>Only safe to disable if the VM is in a trusted network (e.g. local LAN or isolated lab).</td><td>No we are not</td><td>No</td></tr><tr><td>sssd.service</td><td>systemctl disable sssd.service</td><td>Domain account support (LDAP, AD)</td><td>If you&#x27;re not using enterprise login systems, this is safe. Try logging in without it.</td><td>Could login after disabling</td><td>Yes</td></tr><tr><td>rsyslog.service</td><td>systemctl disable rsyslog.service</td><td>Legacy syslog logging</td><td>If you use journald only (journalctl), this may be redundant. Check `ps aux</td><td>Disabled it, rebooted and checked <code>journalctl -b</code> if logging is still done with jounalctl</td><td>Yes</td></tr><tr><td>rtkit-daemon.service</td><td>systemctl disable rtkit-daemon.service</td><td>Real-time audio support</td><td>If you&#x27;re not using PulseAudio/pipewire, not needed. Try audio apps if unsure.</td><td>I do not use audio anyways</td><td>Yes</td></tr><tr><td><a href="mailto:getty@tty1.service" target="_blank" rel="noopener noreferrer">getty@tty1.service</a> (template)</td><td>systemctl disable <a href="mailto:getty@tty1.service" target="_blank" rel="noopener noreferrer">getty@tty1.service</a></td><td>Console login prompt</td><td>If using SSH only, can disable to free a TTY. But keep at least one getty if debugging locally.</td><td>I want to keep it otherwise I would loose the option of remote hands if I make a mistake</td><td>No</td></tr></tbody></table>
<p>Lets test it on our VM, these are the ones we decided to also disable:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable sssd.service rsyslog.service rtkit-daemon.service</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Final Services Disable" src="/assets/images/Pasted image 20250705213036-a7c2aa9d27597ab132121d399b7d84d5.png" width="1052" height="679" class="img_ev3q"></p>
<p>Yes we can still log in on the local VM. Lets repeat all on the server.</p>
<p>Lets first measure the impact on the server we have by disabling them. We run the following commands before and after</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemd-analyze blame</span><br></span></code></pre></div></div>
<p>actually this gives me to much information, we want the total time, so we can sum it up like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemd-analyze blame | awk &#x27;{ sum += $1 } END { print sum &quot;ms total&quot; }&#x27;</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Boot Time Analysis" src="/assets/images/Pasted image 20250705213444-bdf2bd11c0c93eb89aafa135faf25bfe.png" width="1966" height="434" class="img_ev3q"></p>
<p>We remember we have <strong>8794.29ms</strong> total time</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl list-units --type=service --state=running</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Running Services" src="/assets/images/Pasted image 20250705213243-dbc31e4f58d1be0ecf65668410ac51fd.png" width="1966" height="1218" class="img_ev3q"></p>
<p>This is the current state of the services running. Now lets disable all the services we tried on the local VM</p>
<p><img decoding="async" loading="lazy" alt="Services Disabled" src="/assets/images/Pasted image 20250705214121-c9310dc15cb484fe9a64b6d11d59a2de.png" width="1826" height="1526" class="img_ev3q"></p>
<p>We did not lock ourselves out so that is good!</p>
<p>Lets test out impact on startup again</p>
<p><img decoding="async" loading="lazy" alt="Boot Time After Disable" src="/assets/images/Pasted image 20250705214239-db5988f6e1b022d60695925eeb614cf6.png" width="1826" height="434" class="img_ev3q"></p>
<p>It went down from 8794.29ms to 7536.38ms, so only marginally. If I had to do it for my own server I would not bother doing it honestly since the impact is so little.</p>
<p><img decoding="async" loading="lazy" alt="Additional Services" src="/assets/images/Pasted image 20250705214655-1c18160fbe8d72c9f7be1a178ce859e3.png" width="1826" height="994" class="img_ev3q"></p>
<p>actually I still missed disabling some of the optional ones from the list above, so back to the local VM with disabling:</p>
<p>Lets go trough all of them again.</p>
<table><thead><tr><th><strong>Service</strong></th><th><strong>Description</strong></th><th><strong>How to Check If You Need It / Test</strong></th><th><strong>Command(s) to Test</strong></th><th><strong>Decision Guide</strong></th><th>My Decicion</th></tr></thead><tbody><tr><td>atd.service</td><td>Deferred job scheduler for at</td><td>Are you using at to schedule one-time jobs?</td><td>atq (list scheduled at jobs)  Check cron jobs or user jobs for usage of at</td><td>If no scheduled at jobs and no users use it → disable</td><td>atq empty → Disable</td></tr><tr><td>auditd.service</td><td>Security auditing daemon</td><td>Is auditing required for compliance/security?</td><td>Check audit logs: ausearch -m USER_LOGIN  or auditctl -s</td><td>Required for security/compliance → keep</td><td>Keep</td></tr><tr><td>chronyd.service</td><td>NTP time sync daemon</td><td>Is system time synced by chrony?</td><td>timedatectl status  chronyc tracking</td><td>If you need accurate time and chrony is active → keep</td><td>We need accurate time → keep</td></tr><tr><td>crond.service</td><td>Cron scheduler</td><td>Are there recurring cron jobs?</td><td>crontab -l (for root and users)  Check /etc/cron.* directories</td><td>If you have scheduled tasks → keep</td><td>crontab -l command says no crontab → remove</td></tr><tr><td>dbus-broker.service</td><td>Core IPC system for D-Bus</td><td>Required for most desktop and many system services</td><td>systemctl status dbus-broker.service (usually always needed)</td><td>Usually required → keep</td><td>keep</td></tr><tr><td>firewalld.service</td><td>Firewall daemon</td><td>Do you rely on firewalld for firewall rules?</td><td>firewall-cmd --state  Check rules with firewall-cmd --list-all</td><td>If firewall managed by firewalld → keep</td><td>keep</td></tr><tr><td><a href="mailto:getty@tty1.service" target="_blank" rel="noopener noreferrer">getty@tty1.service</a></td><td>Console login prompt</td><td>Do you need local physical or serial console logins?</td><td>Are you physically accessing the server console?  Or using remote console with physical access?</td><td>If yes → keep, if SSH only and no console needed → can disable</td><td>keep</td></tr><tr><td>gssproxy.service</td><td>GSSAPI proxy for kerberos</td><td>Check if kerberos or services using GSSAPI are in use</td><td>systemctl status gssproxy.service  Check kerberos client or server config</td><td>If kerberos used → keep</td><td>No</td></tr><tr><td>NetworkManager.service</td><td>Network manager</td><td>Is NetworkManager used to manage interfaces?</td><td>nmcli device status  Or systemctl status NetworkManager</td><td>If network configured with NM → keep</td><td>keep</td></tr><tr><td>polkit.service</td><td>Authorization management</td><td>Required for policy-based auth</td><td>systemctl status polkit.service (usually required for sudo, GUI auth)</td><td>Usually required → keep</td><td>keep</td></tr><tr><td>qemu-guest-agent.service</td><td>Guest agent for VM communication</td><td>Are you running inside a QEMU/KVM VM?</td><td>systemctl status qemu-guest-agent.service  Check virt-what or VM environment</td><td>VM: keep, bare metal: disable</td><td>keep</td></tr><tr><td>rpcbind.service</td><td>RPC portmapper (used by NFS)</td><td>Do you use NFSv3 or services relying on RPC?</td><td>systemctl status rpcbind.service  Check mount points: `mount</td><td>grep nfs`</td><td>rpcbind.service is <strong>not actively required</strong> - the <strong>NFS server is not running</strong> → remove</td></tr><tr><td>sshd.service</td><td>OpenSSH server daemon</td><td>Required if remote SSH login is used</td><td>Try SSH login from another host</td><td>If you need remote SSH → keep</td><td>keep</td></tr><tr><td>systemd-journald.service</td><td>Journal logging</td><td>Core system logging</td><td>journalctl logs presence</td><td>Required → keep</td><td>keep</td></tr><tr><td>systemd-logind.service</td><td>User login management</td><td>Handles user sessions and seats</td><td>loginctl to list sessions</td><td>Required → keep</td><td>keep</td></tr><tr><td>systemd-udevd.service</td><td>Device manager</td><td>Manages device events</td><td>udevadm info commands  Check devices</td><td>Required → keep</td><td>keep</td></tr><tr><td>tuned.service</td><td>Performance tuning daemon</td><td>Is system performance tuned by tuned profiles?</td><td>tuned-adm active</td><td>If active profile is &quot;virtual-guest&quot; or similar → usually keep, else optional</td><td>keep</td></tr><tr><td><a href="mailto:user@0.service" target="_blank" rel="noopener noreferrer">user@0.service</a></td><td>User session for root user</td><td>Required for root&#x27;s systemd user session</td><td>loginctl show-user 0</td><td>Required → keep</td><td>keep</td></tr></tbody></table>
<p>To decide, I go trough all of them I still want to disable like this (examplem for chronyd)</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl list-dependencies --reverse chronyd</span><br></span></code></pre></div></div>
<p>this will show if services rely on that service. If not, I can remove them also</p>
<p>Test if we can disable Kebros?</p>
<table><thead><tr><th><strong>Check</strong></th><th><strong>Result</strong></th><th><strong>Meaning / Conclusion</strong></th></tr></thead><tbody><tr><td>systemctl status gssproxy.service</td><td>Active (running), but disabled preset</td><td>Service is running but not enabled to start automatically.</td></tr><tr><td>systemctl list-dependencies --reverse gssproxy</td><td>Depended on by auth-rpcgss-module.service</td><td>Some auth RPC module depends on it, but possibly optional.</td></tr><tr><td>`rpm -qa</td><td>grep krb5`</td><td>krb5-libs, sssd-krb5-common, sssd-krb5 installed</td></tr><tr><td>klist</td><td>Command not found</td><td>No Kerberos client tools installed or missing from $PATH.</td></tr><tr><td>`testparm</td><td>grep &#x27;security&#x27;`</td><td>security = USER in Samba config</td></tr><tr><td>grep -i &#x27;krb5&#x27; /etc/sssd/sssd.conf</td><td>File not found</td><td>No SSSD Kerberos config; sssd not configured for Kerberos.</td></tr><tr><td>grep -i &#x27;krb5&#x27; /etc/ldap.conf</td><td>File not found</td><td>No LDAP config with Kerberos settings found.</td></tr><tr><td>cat /etc/krb5.conf</td><td>Mostly defaults; no active realms</td><td>No configured Kerberos realms, no active Kerberos KDC.</td></tr><tr><td>`mount</td><td>grep sec=`</td><td>No output</td></tr><tr><td>systemctl status sssd</td><td>Inactive (dead), disabled</td><td>sssd not running, so no active LDAP/Kerberos integration.</td></tr></tbody></table>
<p>--&gt; we can disable Kebros</p>
<p>So we can test the next batch of services to disable</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable atd.service crond.service gssproxy.service rpcbind.service</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Additional Services Disabled" src="/assets/images/Pasted image 20250705222350-4f1a0ac9ad9f268f1dd7a743d0c728d3.png" width="1052" height="679" class="img_ev3q"></p>
<p>These are also fine to remove</p>
<p><img decoding="async" loading="lazy" alt="Services Status" src="/assets/images/Pasted image 20250705222220-75ab7b3024221a018cc1a9cce6241788.png" width="1770" height="686" class="img_ev3q"></p>
<p>And they are successfully disabled as well</p>
<p>Not much impact time wise</p>
<p><img decoding="async" loading="lazy" alt="Boot Time Final" src="/assets/images/Pasted image 20250705222309-5faf378382403fe2274eaa127c7d4a8d.png" width="1770" height="434" class="img_ev3q"></p>
<p>This is the final list of services I kept</p>
<p><img decoding="async" loading="lazy" alt="Final Services List" src="/assets/images/Pasted image 20250705222355-58dcc4e1b27e285c80dd3bea8e666b7c.png" width="1770" height="910" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removing-programs">Removing Programs<a href="#removing-programs" class="hash-link" aria-label="Direct link to Removing Programs" title="Direct link to Removing Programs">​</a></h3>
<p>we can list the groups we have with</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf group list --installed</span><br></span></code></pre></div></div>
<p>and then test what will be uninstalled with</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf groupremove --assumeno &quot;Container Management&quot;</span><br></span></code></pre></div></div>
<p>I checked all groups what would be removed</p>
<p><img decoding="async" loading="lazy" alt="Program Groups" src="/assets/images/Pasted image 20250705235514-37a313c29221bf09a35745d6e02e6bc7.png" width="2022" height="1470" class="img_ev3q"></p>
<p>Lets remove them for real</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf groupremove &quot;Container Management&quot; &quot;Legacy UNIX Compatibility&quot; &quot;Console Internet Tools&quot; &quot;Headless Management&quot;</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Group Removal" src="/assets/images/Pasted image 20250705235837-251a4175d150a2bdf0d2383b52b76d63.png" width="2022" height="1890" class="img_ev3q"></p>
<p>and done</p>
<p><img decoding="async" loading="lazy" alt="Group Removal Complete" src="/assets/images/Pasted image 20250705235848-6c945239206c18e51e213ecf00b5c107.png" width="2022" height="1890" class="img_ev3q"></p>
<p>We can also check stuff with</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf repoquery --unneeded</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Unneeded Packages" src="/assets/images/Pasted image 20250706000027-3d3a28e106c60492df2e3b90b8c32a2b.png" width="2022" height="490" class="img_ev3q"></p>
<p>Apparently we should be able to remove both, since they are not needed inside a VM which uses legacy BIOS instead of UEFI
the first one is for efi boot we should keep it to be safe, the tools we can remove for sure</p>
<p>we do not need the GRUB tools, so we can</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf remove grub2-tools-extra</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="GRUB Tools Removal" src="/assets/images/Pasted image 20250706001126-22a9e4c48d9b880350d524cc87d78ce3.png" width="2022" height="1022" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-harden-firewall-rules">4. Harden Firewall Rules<a href="#4-harden-firewall-rules" class="hash-link" aria-label="Direct link to 4. Harden Firewall Rules" title="Direct link to 4. Harden Firewall Rules">​</a></h2>
<p>We can see all open ports with</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ss -tulpen</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Open Ports" src="/assets/images/Pasted image 20250706001638-acf28b89dbb129b2e0128b3d6fa51a44.png" width="3114" height="1022" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="current-open-ports-and-services">Current Open Ports and Services<a href="#current-open-ports-and-services" class="hash-link" aria-label="Direct link to Current Open Ports and Services" title="Direct link to Current Open Ports and Services">​</a></h3>
<table><thead><tr><th><strong>Protocol</strong></th><th><strong>Port</strong></th><th><strong>Service / Process</strong></th><th><strong>Description</strong></th><th><strong>Recommendation</strong></th></tr></thead><tbody><tr><td>UDP</td><td>111</td><td>rpcbind (systemd)</td><td>RPC service, used mainly for NFS and related RPC services</td><td>Disable if you don&#x27;t use NFS or RPC</td></tr><tr><td>UDP</td><td>323</td><td>chronyd</td><td>NTP daemon for time synchronization</td><td>Usually safe, keep if you want accurate time</td></tr><tr><td>TCP</td><td>111</td><td>rpcbind (systemd)</td><td>RPC service on TCP</td><td>Disable if not needed</td></tr><tr><td>TCP</td><td>22</td><td>sshd</td><td>SSH server, secure remote shell access</td><td>Keep enabled</td></tr><tr><td>TCP</td><td>23</td><td>telnet.socket</td><td>Telnet server, unencrypted remote shell</td><td>Disable immediately (very insecure)</td></tr></tbody></table>
<p>We just want ssh and https so port 22 and port 443 (not allowed yet)</p>
<p>Disable Telnet</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop telnet.socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable telnet.socket</span><br></span></code></pre></div></div>
<p>Disable  rpcbind</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop rpcbind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable rpcbind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop rpcbind rpcbind.socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable rpcbind rpcbind.socket</span><br></span></code></pre></div></div>
<p>seems good on that side now</p>
<p><img decoding="async" loading="lazy" alt="Ports After Cleanup" src="/assets/images/Pasted image 20250706002749-1a65d64fd3c41b70ea6ae09a0fa969bb.png" width="3114" height="518" class="img_ev3q"></p>
<p>We check what the firewall says</p>
<p><img decoding="async" loading="lazy" alt="Firewall Status" src="/assets/images/Pasted image 20250706003150-4cd5eca83a07973d26c5d7063cdba3e6.png" width="1966" height="742" class="img_ev3q"></p>
<p>Lets check the default Zone (pre configured presets as I understand)</p>
<p><img decoding="async" loading="lazy" alt="Default Zone" src="/assets/images/Pasted image 20250706003742-15e45f69bcbdc5e08d268dcbe8803bb9.png" width="1182" height="518" class="img_ev3q"></p>
<p>It is set to public, which is already the more restrictive setting on untrusted networks</p>
<p>lets check the services that are allowed in the public firewall zone</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">firewall-cmd --zone=public --list-services</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Allowed Services" src="/assets/images/Pasted image 20250706004854-3a42143c1da2da10ec66508c9fe82bdf.png" width="1252" height="434" class="img_ev3q"></p>
<p>somehow Telnet is still enabled (I just stopped the service before not firewall rule), and some other stuff I have to disable here for real this time</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">firewall-cmd --zone=public --remove-service=telnet --permanent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">firewall-cmd --reload</span><br></span></code></pre></div></div>
<p>no more telnet now</p>
<p><img decoding="async" loading="lazy" alt="Telnet Removed" src="/assets/images/Pasted image 20250706005036-e3d39f4f0e4cf99d0fdad2a4d9baa1bb.png" width="1504" height="546" class="img_ev3q"></p>
<p>Lets check the other two except ssh which we know of</p>
<table><thead><tr><th><strong>Service</strong></th><th><strong>What It Does</strong></th><th><strong>Should You Keep It?</strong></th><th><strong>My Decision</strong></th></tr></thead><tbody><tr><td><strong>cockpit</strong></td><td>Web-based admin interface for managing your Linux system remotely via browser (default port 9090)</td><td>Keep if you use it for server management; otherwise disable for tighter security</td><td>Very insecure, we manage over ssh</td></tr><tr><td><strong>dhcpv6-client</strong></td><td>Allows DHCPv6 client to receive IPv6 network configuration automatically</td><td>Keep if your network uses IPv6 and DHCPv6; otherwise can be disabled</td><td>Check if we use ipv6 and then disable to reduce attack surface</td></tr></tbody></table>
<p>Disable cockpit</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">firewall-cmd --zone=public --remove-service=cockpit --permanent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">firewall-cmd --reload</span><br></span></code></pre></div></div>
<p>Check if there is a global scope IPv6 (not a loopback) with</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ip -6 addr show</span><br></span></code></pre></div></div>
<p>And check for DHCPv6 leases</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">journalctl -u NetworkManager | grep DHCP6</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="IPv6 Check" src="/assets/images/Pasted image 20250706005847-49d22930374a8649be919e14673464a5.png" width="1504" height="546" class="img_ev3q"></p>
<p>What we can see:</p>
<ul>
<li>lo (loopback) has ::1/128 — normal and local only.</li>
<li>ens3 has a link-local IPv6 address fe80::... — this is automatically assigned and only works on your local subnet.</li>
<li><strong>No global IPv6 address</strong> is assigned on ens3 (no addresses like 2001:... or 2600:...).</li>
</ul>
<p><strong>Logs:</strong></p>
<ul>
<li>No DHCPv6 lease messages in NetworkManager logs.</li>
</ul>
<p>so we can disable <strong>DHCPv6 client</strong> for the firewall</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">firewall-cmd --zone=public --remove-service=dhcpv6-client --permanent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">firewall-cmd --reload</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="Final Firewall Rules" src="/assets/images/Pasted image 20250706010320-33b0309c0038ba1d045f3515b468bc5b.png" width="1602" height="658" class="img_ev3q"></p>
<p>now we only have ssh allowed</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-harden-the-system">7. Harden the system<a href="#7-harden-the-system" class="hash-link" aria-label="Direct link to 7. Harden the system" title="Direct link to 7. Harden the system">​</a></h2>
<p>We check which users have access to the system</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat /etc/passwd and sudo/wheel group members</span><br></span></code></pre></div></div>
<p>We only allow key-based log in</p>
<p>We check the SELinux status</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">getenforce</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="SELinux Status" src="/assets/images/Pasted image 20250706011221-d1dc1927716e532d13d22af096097fda.png" width="972" height="434" class="img_ev3q"></p>
<p>lets enable it by going into the config</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nano /etc/selinux/config</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="SELinux Config" src="/assets/images/Pasted image 20250706011432-fc397743fe64060fb1fa89cea876bfa1.png" width="1742" height="1190" class="img_ev3q"></p>
<p>SELINUX is now enabled by enforcing MAC</p>
<h1>OOPS! Remote Hands needed :/</h1>
<p><img decoding="async" loading="lazy" alt="System Error" src="/assets/images/Pasted image 20250706015625-7edcd62bd420b3f5a2826808dac756be.png" width="1364" height="630" class="img_ev3q"></p>
<p>I rebooted and something went wrong. Possibly removed some important stuff.
Lesson learned to always test on a local copy of the VM if available, then I could have retraced my steps.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-building-the-lamp">5. Building the LAMP<a href="#5-building-the-lamp" class="hash-link" aria-label="Direct link to 5. Building the LAMP" title="Direct link to 5. Building the LAMP">​</a></h2>
<p>I do not want a Wordpress because it looks dated and kind of ugly. Since I am a big fan on Markdown (seen by this Sprint documentation being written in Markdown) we build a Lamp that displays Markdown sites.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-overview---public-site--cms">System Overview - Public Site + CMS<a href="#system-overview---public-site--cms" class="hash-link" aria-label="Direct link to System Overview - Public Site + CMS" title="Direct link to System Overview - Public Site + CMS">​</a></h3>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auth--invite-flow---secure-cms-access">Auth &amp; Invite Flow - Secure CMS Access<a href="#auth--invite-flow---secure-cms-access" class="hash-link" aria-label="Direct link to Auth &amp; Invite Flow - Secure CMS Access" title="Direct link to Auth &amp; Invite Flow - Secure CMS Access">​</a></h3>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cms-edit--docusaurus-sync-flow">CMS Edit → Docusaurus Sync Flow<a href="#cms-edit--docusaurus-sync-flow" class="hash-link" aria-label="Direct link to CMS Edit → Docusaurus Sync Flow" title="Direct link to CMS Edit → Docusaurus Sync Flow">​</a></h3>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="superbase-data-model">Superbase Data Model<a href="#superbase-data-model" class="hash-link" aria-label="Direct link to Superbase Data Model" title="Direct link to Superbase Data Model">​</a></h3>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-deployment">Local Deployment<a href="#local-deployment" class="hash-link" aria-label="Direct link to Local Deployment" title="Direct link to Local Deployment">​</a></h3>
</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Krydix/It-Security-Website/tree/main/docs/sprint-documentation/sprint-2.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/sprint-documentation/sprint-1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Sprint 1 - VM Setup and Initial Configuration</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/production-deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Production Deployment - Nginx &amp; Let&#x27;s Encrypt</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-identify-our-vm" class="table-of-contents__link toc-highlight">1. Identify our VM</a></li><li><a href="#2-set-the-correct-fqdn" class="table-of-contents__link toc-highlight">2. Set the correct FQDN</a><ul><li><a href="#understanding-the-hostname" class="table-of-contents__link toc-highlight">Understanding the hostname</a></li></ul></li><li><a href="#3-reduce-autostart-programs" class="table-of-contents__link toc-highlight">3. Reduce Autostart programs</a><ul><li><a href="#what-services-can-we-deactivate" class="table-of-contents__link toc-highlight">What services can we deactivate?</a></li><li><a href="#removing-programs" class="table-of-contents__link toc-highlight">Removing Programs</a></li></ul></li><li><a href="#4-harden-firewall-rules" class="table-of-contents__link toc-highlight">4. Harden Firewall Rules</a><ul><li><a href="#current-open-ports-and-services" class="table-of-contents__link toc-highlight">Current Open Ports and Services</a></li></ul></li><li><a href="#7-harden-the-system" class="table-of-contents__link toc-highlight">7. Harden the system</a></li><li><a href="#5-building-the-lamp" class="table-of-contents__link toc-highlight">5. Building the LAMP</a><ul><li><a href="#system-overview---public-site--cms" class="table-of-contents__link toc-highlight">System Overview - Public Site + CMS</a></li><li><a href="#auth--invite-flow---secure-cms-access" class="table-of-contents__link toc-highlight">Auth &amp; Invite Flow - Secure CMS Access</a></li><li><a href="#cms-edit--docusaurus-sync-flow" class="table-of-contents__link toc-highlight">CMS Edit → Docusaurus Sync Flow</a></li><li><a href="#superbase-data-model" class="table-of-contents__link toc-highlight">Superbase Data Model</a></li><li><a href="#local-deployment" class="table-of-contents__link toc-highlight">Local Deployment</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Study Materials</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Study Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/network-fundamentals">Network Security</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/web-security-lamp">Web Security</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Topics</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/operating-system-security">Operating Systems</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cryptography-security">Cryptography</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/complete-test-guide">Complete Guide</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Sprint Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sprint-documentation/sprint-1">Sprint 1 - VM Setup</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sprint-documentation/sprint-2">Sprint 2 - Hardening</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Deployment</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/production-deployment">Production Setup</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/windows-security-analysis">Windows Security</a></li><li class="footer__item"><a href="https://github.com/Krydix/It-Security-Website" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 IT Security Study Guide. Built for educational purposes.</div></div></div></footer></div>
</body>
</html>